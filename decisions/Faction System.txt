#---------------------------------------
# Factions
#---------------------------------------
country_decisions = {
    # Alliance Roster
	view_alliance_roster = {
		potential = {   
            has_global_flag = enabled_faction_mechanics
            has_global_flag = alliance_exists
		}
		
		allow = {
            has_global_flag = alliance_exists
		}
		
		effect = {
            country_event = { id = wwu_faction_roster.100 }
            
            hidden_effect = {
                add_country_modifier = {
                    name = recent_roster_view
                    duration = 365
                    hidden = yes
                }
            }
		}
		ai_will_do = {
			factor = 1
            
            modifier = {
                factor = 0
                
                has_country_modifier = recent_roster_view
            }
            
            modifier = {
                factor = 0
                
                NOT = { has_country_modifier = head_of_alliance }
            }
		}
	}
    
    # Horde Roster
	view_horde_roster = {
		potential = {
            has_global_flag = enabled_faction_mechanics
            has_global_flag = horde_exists
		}
		
		allow = {
            has_global_flag = horde_exists
		}
		
		effect = {
            country_event = { id = wwu_faction_roster.101 }
            
            hidden_effect = {
                add_country_modifier = {
                    name = recent_roster_view
                    duration = 365
                    hidden = yes
                }
            }
		}
		ai_will_do = {
			factor = 1
            
            modifier = {
                factor = 0
                
                has_country_modifier = recent_roster_view
            }
            
            modifier = {
                factor = 0
                
                NOT = { has_country_modifier = head_of_horde }
            }
		}
	}
    
    # Old Horde Roster
	view_old_horde_roster = {
		potential = {
            has_global_flag = enabled_faction_mechanics
            has_global_flag = old_horde_exists
		}
		
		allow = {
            has_global_flag = old_horde_exists
		}
		
		effect = {
            country_event = { id = wwu_faction_roster.102 }
            
            hidden_effect = {
                add_country_modifier = {
                    name = recent_roster_view
                    duration = 365
                    hidden = yes
                }
            }
		}
		ai_will_do = {
			factor = 1
            
            modifier = {
                factor = 0
                
                has_country_modifier = recent_roster_view
            }
            
            modifier = {
                factor = 0
                
                NOT = { has_country_modifier = head_of_old_horde }
            }
		}
	}
    
    # Trade Coalition Roster
	view_trade_coalition_roster = {
		potential = {
            has_global_flag = enabled_faction_mechanics
            has_global_flag = trade_coalition_exists
		}
		
		allow = {
            has_global_flag = trade_coalition_exists
		}
		
		effect = {
            country_event = { id = wwu_faction_roster.103 }
            
            hidden_effect = {
                add_country_modifier = {
                    name = recent_roster_view
                    duration = 365
                    hidden = yes
                }
            }
		}
		ai_will_do = {
			factor = 1
            
            modifier = {
                factor = 0
                
                has_country_modifier = recent_roster_view
            }
            
            modifier = {
                factor = 0
                
                NOT = { has_country_modifier = head_of_trade_coalition }
            }
		}
	}
    
    # Alliance of Lordaeron
	establish_the_alliance = {
		potential = {
            has_global_flag = enabled_faction_mechanics
            current_age = age_orcish_horde
			tag = STW
            NOT = { has_global_flag = setup_the_alliance }
		}
		
		allow = {
            current_age = age_orcish_horde
            
            # Check if any land in these regions is Orc or Ogre, i.e. Old Horde has invaded
            OR = {
                region_swamp_of_sorrows = {
                    OR = {
                        culture_group = culture_group_orc
                        culture_group = culture_group_ogre
                    }
                }
                region_blasted_lands = {
                    OR = {
                        culture_group = culture_group_orc
                        culture_group = culture_group_ogre
                    }
                }
            }
            
            # Lordaeron
            A08 = {
                alliance_with = ROOT
            }
		}
		
		effect = {
            hidden_effect = {
                set_global_flag = setup_the_alliance
                set_global_flag = alliance_exists
            }
            
            # Stormwind
			STW = {
                set_member_of_faction = {
                    faction = alliance
                }
            }
            
            # Lordaeron
            A08 = {
                set_head_of_faction = {
                    faction = alliance
                }
                set_member_of_faction = {
                    faction = alliance
                }
            }
            
            # Requests to join
            
            # Stratholme
            A10 = {
                country_event = {
                    id = wwu_faction_system.1
                    days = 7
                }
            }
            # Gilneas
            A12 = {
                country_event = {
                    id = wwu_faction_system.1
                    days = 7
                }
            }
            # Kul Tiras
            A14 = {
                country_event = {
                    id = wwu_faction_system.1
                    days = 7
                }
            }
            # Stromgarde
            A16 = {
                country_event = {
                    id = wwu_faction_system.1
                    days = 7
                }
            }
            # Dalaran
            A18 = {
                country_event = {
                    id = wwu_faction_system.1
                    days = 7
                }
            }
            # Ironforge
            A29 = {
                country_event = {
                    id = wwu_faction_system.1
                    days = 7
                }
            }
            # Gnomeregan
            A32 = {
                country_event = {
                    id = wwu_faction_system.1
                    days = 7
                }
            }
            # Quel'Thelas
            A90 = {
                country_event = {
                    id = wwu_faction_system.1
                    days = 7
                }
            }
		}
		ai_will_do = {
			factor = 1
		}
	}
    
    # Alliance of Lordaeron - Stormwind fails
    establish_the_alliance_lordaeron = {
		potential = {
            has_global_flag = enabled_faction_mechanics
            NOT = { has_global_flag = setup_the_alliance }
            current_age = age_orcish_horde
			tag = A08
            is_year = 597
		}
		
		allow = {
            current_age = age_orcish_horde
			
            # Check if any land in these regions is Orc or Ogre, i.e. Old Horde has invaded
            OR = {
                region_swamp_of_sorrows = {
                    OR = {
                        culture_group = culture_group_orc
                        culture_group = culture_group_ogre
                    }
                }
                region_blasted_lands = {
                    OR = {
                        culture_group = culture_group_orc
                        culture_group = culture_group_ogre
                    }
                }
            }
		}
		
		effect = {
            hidden_effect = {
                set_global_flag = setup_the_alliance
                set_global_flag = alliance_exists
            }
            
            # Lordaeron
            A08 = {
                set_head_of_faction = {
                    faction = alliance
                }
                set_member_of_faction = {
                    faction = alliance
                }
            }
            
            # Requests to join
            # Stormwind
            STW = {
                country_event = {
                    id = wwu_faction_system.1
                    days = 7
                }
            }
            # Stratholme
            A10 = {
                country_event = {
                    id = wwu_faction_system.1
                    days = 7
                }
            }
            # Gilneas
            A12 = {
                country_event = {
                    id = wwu_faction_system.1
                    days = 7
                }
            }
            # Kul Tiras
            A14 = {
                country_event = {
                    id = wwu_faction_system.1
                    days = 7
                }
            }
            # Stromgarde
            A16 = {
                country_event = {
                    id = wwu_faction_system.1
                    days = 7
                }
            }
            # Dalaran
            A18 = {
                country_event = {
                    id = wwu_faction_system.1
                    days = 7
                }
            }
            # Ironforge
            A29 = {
                country_event = {
                    id = wwu_faction_system.1
                    days = 7
                }
            }
            # Gnomeregan
            A32 = {
                country_event = {
                    id = wwu_faction_system.1
                    days = 7
                }
            }
            # Quel'Thelas
            A90 = {
                country_event = {
                    id = wwu_faction_system.1
                    days = 7
                }
            }
		}
		ai_will_do = {
			factor = 1
		}
	}
    
    # Thrall's Horde
	establish_the_horde = {
		potential = {
            has_global_flag = enabled_faction_mechanics
            # 50 years after Orcish invasion
            had_global_flag = {
                flag = orcish_horde_established
                days = 18250
            }
            
            NOT = { has_global_flag = setup_the_horde }
            OR = {
                culture_group = culture_group_orc
                culture_group = culture_group_tauren
                culture_group = culture_group_thalassian
                culture_group = culture_group_troll
                culture_group = culture_group_goblin
                culture_group = culture_group_undead
            }
		}
		
		allow = {
            current_age = age_burning_legion
            OR = {
                culture_group = culture_group_orc
                culture_group = culture_group_tauren
                culture_group = culture_group_thalassian
                culture_group = culture_group_troll
                culture_group = culture_group_goblin
                culture_group = culture_group_undead
            }
            capital_scope = {
                continent = continent_kalimdor
            }
		}
		
		effect = {
            hidden_effect = {
                set_global_flag = setup_the_horde
                set_global_flag = horde_exists
            }
            
            set_head_of_faction = {
                faction = horde
            }
            set_member_of_faction = {
                faction = horde
            }
		}
		ai_will_do = {
			factor = 1
            
            modifier = {
                factor = 0
                
                NOT = { is_historical_horde_member = yes }
            }
		}
	}
}