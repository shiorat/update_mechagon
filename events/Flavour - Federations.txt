namespace = wwu_federations

# Leadership Pays Off
country_event = {
	id = wwu_federations.1
	title = wwu_federations.1.title
	desc = wwu_federations.1.desc
	picture = BAINE_BLOODHOOF_eventPicture
	
	trigger = {
		is_federation_leader = yes
		federation_size = 3
		all_federation_members = {
			has_opinion = { 
				who = ROOT 
				value = 75 
			}
		}
		NOT = { has_ruler_modifier = federation_leadership_pays_off }
	}
	
	mean_time_to_happen = {
		months = 240
	}
	
	option = {
		name = wwu_federations.1.option.a
        
		add_ruler_modifier = { 
			name = federation_leadership_pays_off
			duration = -1  
		}
	}
}

# Stronger Together
country_event = {
	id = wwu_federations.2
	title = wwu_federations.2.title
	desc = wwu_federations.2.desc
	picture = ARMOR_UP_eventPicture
	
	trigger = {
		is_federation_leader = yes
		num_federation_advancements = 4
		OR = {
			NOT = { has_country_modifier = federation_grow_in_harmony_mod }
			NOT = { has_ruler_modifier = federation_leaders_share_mod }
		}
	}
	
	mean_time_to_happen = {
		months = 240
	}
	
	option = {
		name = wwu_federations.2.option.a
        
		ai_chance = { 
			factor = 50 
			modifier = {
				factor = 1.5
				all_federation_members = {
					has_opinion = { 
						who = ROOT 
						value = 75 
					}
				}
			}
		}
		every_federation_member = {
			add_country_modifier = { 
				name = federation_grow_in_harmony_mod
				duration = 3650
			}
		}
	}
	
	option = {
		name = wwu_federations.2.option.b
        
		ai_chance = { 
			factor = 50 
		}
		add_ruler_modifier = { 
			name = federation_leaders_share_mod
			duration = -1  
		}
	}
}

# Problems for the Federation
country_event = {
	id = wwu_federations.3
	title = wwu_federations.3.title
	desc = wwu_federations.3.desc
	picture = AWAKENED_eventPicture
	
	trigger = {
		is_federation_nation = yes
		is_federation_leader = no
		num_federation_advancements = 4
	}
	
	mean_time_to_happen = {
		months = 240
	}
	
	option = {
		name = wwu_federations.3.option.a
		ai_chance = { 
			factor = 50 
			modifier = {
				factor = 0.5
				all_federation_members = {
					has_opinion = { 
						who = ROOT 
						value = 75 
					}
				}
			}
		}
		every_federation_member = {
			limit = {
				is_federation_leader = yes
			}
			add_ruler_modifier = { 
				name = federation_lost_respect_mod
				duration = -1  
			}
		}
	}
	
	option = {
		name = wwu_federations.3.option.b
        
		ai_chance = { 
			factor = 50 
			modifier = {
				factor = 1.5
				all_federation_members = {
					has_opinion = { 
						who = ROOT 
						value = 75 
					}
				}
			}
		}
        
        add_dip_power = -200
        
		every_federation_member = {
			limit = {
				is_federation_leader = yes
			}
			add_ruler_modifier = { 
				name = federation_lost_respect_mod
				duration = 365 
			}
		}
	}
}

# Uniting Against The World
country_event = {
	id = wwu_federations.4
	title = wwu_federations.4.title
	desc = wwu_federations.4.desc
	picture = BATTLE_AXE_eventPicture
	
	trigger = {
		is_federation_nation = yes
		num_federation_advancements = 2
		any_known_country = {
			is_neighbor_of = ROOT
			tech_difference = 5
			NOT = { 
				has_opinion = { 
					who = ROOT 
					value = 75 
				} 
			}
		}
		NOT = { has_country_modifier = federation_stand_the_ground_mod }
	}
	
	mean_time_to_happen = {
		months = 12
	}
	
	option = { 
		name = wwu_federations.4.option.a
        
		ai_chance = { 
			factor = 50 
			modifier = {
				factor = 2
				any_known_country = {
					is_neighbor_of = ROOT
					tech_difference = 10
				}
			}
			modifier = {
				factor = 1.5
				all_federation_members = {
					has_opinion = { 
						who = ROOT 
						value = 75 
					}
				}
			}
		}
		custom_tooltip = LIVE_OR_DIE_TT
		hidden_effect = {
			every_federation_member = {
				ROOT = {
					remove_historical_rival = PREV
					add_historical_friend = PREV
				}
			}
		}
	}
	
	option = {
		name = wwu_federations.4.option.b
        
		ai_chance = { 
			factor = 50 
			modifier = {
				factor = 0
				any_known_country = {
					is_neighbor_of = ROOT
					tech_difference = 10
				}
			}
			modifier = {
				factor = 1.5
				any_federation_members = {
					NOT = { 
						has_opinion = { 
							who = ROOT 
							value = 75 
						} 
					}
				}
			}
		}
		add_country_modifier = { 
			name = federation_stand_the_ground_mod
			duration = -1  
		}
	}
}

# Federation Turmoil
country_event = {
	id = wwu_federations.5
	title = wwu_federations.5.title
	desc = wwu_federations.5.desc
	picture = BEAR_TRAP_eventPicture
	
	trigger = {
		is_federation_leader = yes
        federation_size = 3
		any_federation_members = {
            NOT = {
                has_opinion = {
                    who = ROOT
                    value = 100
                }
            }
        }
	}
	
	mean_time_to_happen = {
		months = 240
        
        modifier = {
            factor = 0.5
            
            any_federation_members = {
                NOT = {
                    has_opinion = {
                        who = ROOT
                        value = 0
                    }
                }
            }
        }
	}
    
	option = {
		name = wwu_federations.5.option.a
        
		every_federation_member = {
			add_opinion = {
                modifier = federation_member_ignored
                who = ROOT
            }
		}
        
        ai_chance = { 
			factor = 75
		}
	}
	
	option = {
		name = wwu_federations.5.option.b
        
		add_dip_power = -100
        
        ai_chance = { 
			factor = 25
		}
	}
}

# Federation Collapse
country_event = {
	id = wwu_federations.6
	title = wwu_federations.6.title
	desc = wwu_federations.6.desc
	picture = BETRAYAL_eventPicture
	
	trigger = {
		is_federation_leader = yes
        federation_size = 4
        stability = -2
	}
	
	mean_time_to_happen = {
		months = 320
        
        modifier = {
            factor = 0.8
            
            federation_size = 5
        }
	}
    
	
	option = {
		name = wwu_federations.6.option.a
        
        add_prestige = -25
		add_stability = -1
        
        ai_chance = { 
			factor = 20
		}
	}
	
	option = {
		name = wwu_federations.6.option.b
        
		every_federation_member = {
			add_opinion = {
                modifier = federation_collapse
                who = ROOT
            }
		}
        
        ai_chance = { 
			factor = 80
		}
	}
}
