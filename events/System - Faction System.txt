namespace = wwu_faction_system

# Alliance of Lordaeron
country_event = {
	id = wwu_faction_system.1
	title = wwu_faction_system.1.title
	desc = wwu_faction_system.1.desc
	picture = VARIAN_WRYNN_eventPicture
    
    is_triggered_only = yes
    
    trigger = {
        has_global_flag = enabled_faction_mechanics
    }
	
	option = {
		name = wwu_faction_system.1.option.a
		
        set_member_of_faction = {
            faction = alliance
        }
        
        ai_chance = {
            factor = 80
        }
	}
    
    option = {
		name = wwu_faction_system.1.option.b
		
        add_prestige = -20
        
        ai_chance = {
            factor = 20
            
            modifier = {
                factor = 0
                
                is_subject = yes
            }
            
            # Increase chance if they dislike Stormwind
            modifier = {
                factor = 4
                
                NOT = {
                    has_opinion = {
                        who = STW
                        value = -100
                    }
                }
            }
        }
	}
}

# Collapse - Alliance
# Disband the Alliance if the current Head's capital is sieged down
country_event = {
	id = wwu_faction_system.2
	title = wwu_faction_system.2.title
	desc = wwu_faction_system.2.desc
	picture = LOTHAR_FLEES_STORMWIND_eventPicture
    
    is_triggered_only = yes
    major = yes
    
    trigger = {
        has_global_flag = enabled_faction_mechanics
    }
    
    immediate = {
        set_global_flag = collapse_of_the_alliance
    }
    
	option = {
		name = wwu_faction_system.2.option.a
		
        every_country = {
            limit = {
                has_country_modifier = head_of_alliance
            }
            remove_country_modifier = head_of_alliance
        }
        
        every_country = {
            limit = {
                has_country_modifier = member_of_alliance
            }
            remove_country_modifier = member_of_alliance
        }
	}
}

# High King of the Alliance
country_event = {
	id = wwu_faction_system.3
	title = wwu_faction_system.3.title
	desc = wwu_faction_system.3.desc
	picture = VARIAN_WRYNN_eventPicture
    
    trigger = {
        has_global_flag = enabled_faction_mechanics
        has_country_modifier = member_of_alliance
        has_country_modifier = head_of_alliance
        NOT = { has_reform = alliance_reform }
        
    }
    
    mean_time_to_happen = {
		days = 1		
	}
    
	option = {
		name = wwu_faction_system.3.option.a
		
        change_government = monarchy
        add_government_reform = alliance_reform
	}
}

# Demotion
country_event = {
	id = wwu_faction_system.4
	title = wwu_faction_system.4.title
	desc = wwu_faction_system.4.desc
	picture = LOTHAR_FLEES_STORMWIND_eventPicture
    
    trigger = { 
        has_global_flag = enabled_faction_mechanics
        has_country_modifier = member_of_alliance
        NOT = { has_country_modifier = head_of_alliance }
        has_reform = alliance_reform
    }
    
    mean_time_to_happen = {
		days = 1		
	}
    
	option = {
		name = wwu_faction_system.4.option.a
		
        change_government = monarchy
        add_government_reform = autocracy_reform
	}
}

# Warchief of the Horde
country_event = {
	id = wwu_faction_system.5
	title = wwu_faction_system.5.title
	desc = wwu_faction_system.5.desc
	picture = WARCHIEF_THRALL_eventPicture
    
    trigger = {
        has_global_flag = enabled_faction_mechanics
        has_country_modifier = member_of_horde
        has_country_modifier = head_of_horde
        NOT = { has_reform = horde_reform }
    }
    
    mean_time_to_happen = {
		days = 1		
	}
    
	option = {
		name = wwu_faction_system.5.option.a
		
        change_government = monarchy
        add_government_reform = horde_reform
	}
}

# Demotion
country_event = {
	id = wwu_faction_system.6
	title = wwu_faction_system.6.title
	desc = wwu_faction_system.6.desc
	picture = RISE_OF_THE_HORDE_eventPicture
    
    trigger = {
        has_global_flag = enabled_faction_mechanics
        has_country_modifier = member_of_horde
        NOT = { has_country_modifier = head_of_horde }
        has_reform = horde_reform
    }
    
    mean_time_to_happen = {
		days = 1		
	}
    
	option = {
		name = wwu_faction_system.6.option.a
		
        change_government = monarchy
        add_government_reform = autocracy_reform
	}
}

# Warchief of the Old Horde
country_event = {
	id = wwu_faction_system.7
	title = wwu_faction_system.7.title
	desc = wwu_faction_system.7.desc
	picture = HORDE_TRIAL_eventPicture
    
    trigger = {
        has_global_flag = enabled_faction_mechanics
        has_country_modifier = member_of_old_horde
        has_country_modifier = head_of_old_horde
        NOT = { has_reform = old_horde_reform }
        NOT = { tag = OGR }
    }
    
    mean_time_to_happen = {
		days = 1		
	}
    
	option = {
		name = wwu_faction_system.7.option.a
		
        change_government = tribal
        add_government_reform = old_horde_reform
        add_government_reform = wwu_tribal_established_hierarchy_reform
	}
}

# Demotion
country_event = {
	id = wwu_faction_system.8
	title = wwu_faction_system.8.title
	desc = wwu_faction_system.8.desc
	picture = RISE_OF_THE_HORDE_eventPicture
    
    trigger = { 
        has_global_flag = enabled_faction_mechanics
        has_country_modifier = member_of_old_horde
        NOT = { has_country_modifier = head_of_old_horde }
        has_reform = horde_reform
    }
    
    mean_time_to_happen = {
		days = 1		
	}
    
	option = {
		name = wwu_faction_system.8.option.a
		
        if = {
            limit = {
                technology_group = tech_orc
            }
            change_government = tribal
            add_government_reform = orc_clan_reform
        }
        else = {
            change_government = tribal
            add_government_reform = tribal_despotism_reform
        }
	}
}

# Warchief of the Old Horde (Gorian)
country_event = {
	id = wwu_faction_system.9
	title = wwu_faction_system.9.title
	desc = wwu_faction_system.9.desc
	picture = HORDE_TRIAL_eventPicture
    
    trigger = {
        has_global_flag = enabled_faction_mechanics
        has_country_modifier = member_of_old_horde
        has_country_modifier = head_of_old_horde
        NOT = { has_reform = gorian_horde_reform }
        tag = OGR
    }
    
    mean_time_to_happen = {
		days = 1		
	}
    
	option = {
		name = wwu_faction_system.9.option.a
		
        change_government = monarchy
        add_government_reform = gorian_horde_reform
	}
}

# Setup - Old Horde
# Occurs after 1 year after Blood of Mannoroth starts
country_event = {
	id = wwu_faction_system.10
	title = wwu_faction_system.10.title
	desc = wwu_faction_system.10.desc
	picture = DARK_PORTAL_ASSAULT_eventPicture
    
    major = yes
    is_triggered_only = yes
    
    trigger = {
        has_global_flag = enabled_faction_mechanics
    }
    
    mean_time_to_happen = {
		days = 1
	}
    
    trigger = { 
        NOT = { has_global_flag = setup_the_old_horde }
    }
	
    immediate = {
        set_global_flag = old_horde_exists
        set_global_flag = setup_the_old_horde 
    }
    
	option = {
		name = wwu_faction_system.10.option.a
		
        set_head_of_faction = {
            faction = old_horde
        }
        set_member_of_faction = {
            faction = old_horde
        }
        
        every_country = {
            limit = {
                has_country_modifier = mission_acceptance_of_warlocks
            }
            
            set_member_of_faction = {
                faction = old_horde
            }
        }
	}
}

# Collapse - Old Horde
# Disband the Old Horde if the current Head's capital is sieged down
country_event = {
	id = wwu_faction_system.11
	title = wwu_faction_system.11.title
	desc = wwu_faction_system.11.desc
	picture = HELLFIRE_eventPicture
    
    is_triggered_only = yes
    major = yes
	
    trigger = {
        has_global_flag = enabled_faction_mechanics
    }
    
    immediate = {
        set_global_flag = collapse_the_old_horde
    }
    
	option = {
		name = wwu_faction_system.11.option.a
		
        every_country = {
            limit = {
                has_country_modifier = head_of_old_horde
            }
            remove_country_modifier = head_of_old_horde
        }
        
        every_country = {
            limit = {
                has_country_modifier = member_of_old_horde
            }
            remove_country_modifier = member_of_old_horde
        }
	}
}

# Collapse - Horde
# Disband the Horde if the current Head's capital is sieged down
country_event = {
	id = wwu_faction_system.12
	title = wwu_faction_system.12.title
	desc = wwu_faction_system.12.desc
	picture = HELLFIRE_eventPicture
    
    is_triggered_only = yes
    major = yes
	
    trigger = {
        has_global_flag = enabled_faction_mechanics
    }
    
    immediate = {
        set_global_flag = collapse_the_horde
    }
    
	option = {
		name = wwu_faction_system.12.option.a
		
        every_country = {
            limit = {
                has_country_modifier = head_of_horde
            }
            remove_country_modifier = head_of_horde
        }
        
        every_country = {
            limit = {
                has_country_modifier = member_of_horde
            }
            remove_country_modifier = member_of_horde
        }
	}
}

# Collapse - Trade Coalition
# Disband the Trade Coalition if the current Head's capital is sieged down
country_event = {
	id = wwu_faction_system.13
	title = wwu_faction_system.13.title
	desc = wwu_faction_system.13.desc
	picture = HELLFIRE_eventPicture
    
    is_triggered_only = yes
    major = yes
	
    trigger = {
        has_global_flag = enabled_faction_mechanics
    }
    
    immediate = {
        set_global_flag = collapse_the_trade_coalition
    }
    
	option = {
		name = wwu_faction_system.13.option.a
		
        every_country = {
            limit = {
                has_country_modifier = head_of_trade_coalition
            }
            remove_country_modifier = head_of_trade_coalition
        }
        
        every_country = {
            limit = {
                has_country_modifier = member_of_trade_coalition
            }
            remove_country_modifier = member_of_trade_coalition
        }
	}
}

# Old Horde - Warchief Vote
country_event = {
	id = wwu_faction_system.20
	title = wwu_faction_system.20.title
	desc = wwu_faction_system.20.desc
	picture = HORDE_TRIAL_eventPicture
    
    is_triggered_only = yes
    
    major = yes
    
    trigger = {
        has_global_flag = enabled_faction_mechanics
        has_country_modifier = head_of_old_horde
        NOT = { has_country_flag = ignore_horde_vote }
    }
    
    immediate = {
        remove_country_modifier = head_of_old_horde
    }
	
    # Maintain current member as Warchief
	option = {
		name = wwu_faction_system.20.option.a
        
        add_prestige = -10
        
        every_country = {
            limit = {
                has_country_modifier = member_of_old_horde
                NOT = { has_country_modifier = head_of_old_horde }
            }
            add_opinion = {
                who = ROOT
                modifier = omod_power_hungry
            }
        }
        
        ai_chance = {
            factor = 90
        }
	}
    
    # Permit tribal vote
    option = {
		name = wwu_faction_system.20.option.b
        
        custom_tooltip = tribal_vote_tt
        
        hidden_effect = {
            random_country = {
                limit = {
                    has_country_modifier = member_of_old_horde
                }
                set_head_of_faction = {
                    faction = old_horde
                }
            }
        }
        
        ai_chance = {
            factor = 10
            
            modifier = {
                factor = 0
                
                tag = U03
            }
        }
	}
}

# Horde - Warchief Vote
country_event = {
	id = wwu_faction_system.21
	title = wwu_faction_system.21.title
	desc = wwu_faction_system.21.desc
	picture = HORDE_TRIAL_eventPicture
    
    is_triggered_only = yes
    
    major = yes
    
    trigger = { 
        has_global_flag = enabled_faction_mechanics
        has_country_modifier = head_of_horde
        NOT = { has_country_flag = ignore_horde_vote }
    }
    
    immediate = {
        remove_country_modifier = head_of_horde
    }
	
    # Maintain current member as Warchief
	option = {
		name = wwu_faction_system.21.option.a
        
        add_prestige = -10
        
        every_country = {
            limit = {
                has_country_modifier = member_of_horde
                NOT = { has_country_modifier = head_of_horde }
            }
            add_opinion = {
                who = ROOT
                modifier = omod_power_hungry
            }
        }
	}
    
    # Permit tribal vote
    option = {
		name = wwu_faction_system.21.option.b
        
        add_prestige = 25
        
        custom_tooltip = tribal_vote_tt
        
        hidden_effect = {
            random_country = {
                limit = {
                    has_country_modifier = member_of_horde
                }
                set_head_of_faction = {
                    faction = horde
                }
            }
        }
	}
}

# Alliance
# Pass Leadership
country_event = {
	id = wwu_faction_system.30
	title = wwu_faction_system.30.title
	desc = wwu_faction_system.30.desc
	picture = THE_CULLING_eventPicture
    
    major = yes
    is_triggered_only = yes

    trigger = {
        has_global_flag = enabled_faction_mechanics
    }

    mean_time_to_happen = {
		days = 1
	}
    
	option = {
		name = wwu_faction_system.30.option.a
		
        random_country = {
            limit = {
                has_country_modifier = member_of_alliance
            }
            set_head_of_faction = {
                faction = alliance
            }
        }
	}
}

# Old Horde
# Pass Leadership
country_event = {
	id = wwu_faction_system.31
	title = wwu_faction_system.31.title
	desc = wwu_faction_system.31.desc
	picture = HORDE_TRIAL_eventPicture
    
    major = yes
    is_triggered_only = yes

    trigger = {
        has_global_flag = enabled_faction_mechanics
    }

    mean_time_to_happen = {
		days = 1
	}
    
	option = {
		name = wwu_faction_system.31.option.a
		
        random_country = {
            limit = {
                has_country_modifier = member_of_old_horde
            }
            set_head_of_faction = {
                faction = old_horde
            }
        }
	}
}

# Horde
# Pass Leadership
country_event = {
	id = wwu_faction_system.32
	title = wwu_faction_system.32.title
	desc = wwu_faction_system.32.desc
	picture = HORDE_TRIAL_eventPicture
    
    major = yes
    is_triggered_only = yes

    trigger = {
        has_global_flag = enabled_faction_mechanics
    }

    mean_time_to_happen = {
		days = 1
	}
    
	option = {
		name = wwu_faction_system.32.option.a
		
        random_country = {
            limit = {
                has_country_modifier = member_of_horde
            }
            set_head_of_faction = {
                faction = horde
            }
        }
	}
}

# Trade Coalition
# Pass Leadership
country_event = {
	id = wwu_faction_system.33
	title = wwu_faction_system.33.title
	desc = wwu_faction_system.33.desc
	picture = HORDE_TRIAL_eventPicture
    
    major = yes
    is_triggered_only = yes

    trigger = {
        has_global_flag = enabled_faction_mechanics
    }

    mean_time_to_happen = {
		days = 1
	}
    
	option = {
		name = wwu_faction_system.33.option.a
		
        random_country = {
            limit = {
                has_country_modifier = member_of_trade_coalition
            }
            set_head_of_faction = {
                faction = trade_coalition
            }
        }
	}
}

# Kicked from the Alliance
country_event = {
	id = wwu_faction_system.40
	title = wwu_faction_system.40.title
	desc = wwu_faction_system.40.desc
	picture = THE_CULLING_eventPicture
    
    is_triggered_only = yes

    trigger = {
        has_global_flag = enabled_faction_mechanics
    }

    mean_time_to_happen = {
		days = 1
	}
    
	option = {
		name = wwu_faction_system.40.option.a
		
        add_prestige = -25
	}
}

# Kicked from the Horde
country_event = {
	id = wwu_faction_system.41
	title = wwu_faction_system.41.title
	desc = wwu_faction_system.41.desc
	picture = HORDE_TRIAL_eventPicture
    
    is_triggered_only = yes

    trigger = {
        has_global_flag = enabled_faction_mechanics
    }
    
    mean_time_to_happen = {
		days = 1
	}
    
	option = {
		name = wwu_faction_system.41.option.a
		
        add_prestige = -25
	}
}

# Kicked from the Horde
country_event = {
	id = wwu_faction_system.42
	title = wwu_faction_system.42.title
	desc = wwu_faction_system.42.desc
	picture = HORDE_TRIAL_eventPicture
    
    is_triggered_only = yes

    trigger = {
        has_global_flag = enabled_faction_mechanics
    }
    
    mean_time_to_happen = {
		days = 1
	}
    
	option = {
		name = wwu_faction_system.42.option.a
		
        add_prestige = -25
	}
}

# Kicked from the Trade Coalition
country_event = {
	id = wwu_faction_system.43
	title = wwu_faction_system.43.title
	desc = wwu_faction_system.43.desc
	picture = HORDE_TRIAL_eventPicture
    
    is_triggered_only = yes

    trigger = {
        has_global_flag = enabled_faction_mechanics
    }
    
    mean_time_to_happen = {
		days = 1
	}
    
	option = {
		name = wwu_faction_system.43.option.a
		
        add_prestige = -25
	}
}

# [From.GetName] left the Alliance
country_event = {
	id = wwu_faction_system.50
	title = wwu_faction_system.50.title
	desc = wwu_faction_system.50.desc
	picture = THE_CULLING_eventPicture
    
    is_triggered_only = yes

    trigger = {
        has_global_flag = enabled_faction_mechanics
    }
    
    mean_time_to_happen = {
		days = 1
	}
    
	option = {
		name = wwu_faction_system.50.option.a
		
        add_prestige = -25
	}
}

# [From.GetName] left the Horde
country_event = {
	id = wwu_faction_system.51
	title = wwu_faction_system.51.title
	desc = wwu_faction_system.51.desc
	picture = HORDE_TRIAL_eventPicture
    
    is_triggered_only = yes

    trigger = {
        has_global_flag = enabled_faction_mechanics
    }
    
    mean_time_to_happen = {
		days = 1
	}
    
	option = {
		name = wwu_faction_system.51.option.a
		
        add_prestige = -25
	}
}

# [From.GetName] left the Horde
country_event = {
	id = wwu_faction_system.52
	title = wwu_faction_system.52.title
	desc = wwu_faction_system.52.desc
	picture = HORDE_TRIAL_eventPicture
    
    is_triggered_only = yes

    trigger = {
        has_global_flag = enabled_faction_mechanics
    }
    
    mean_time_to_happen = {
		days = 1
	}
    
	option = {
		name = wwu_faction_system.52.option.a
		
        add_prestige = -25
	}
}

# [From.GetName] left the Trade Coalition
country_event = {
	id = wwu_faction_system.53
	title = wwu_faction_system.53.title
	desc = wwu_faction_system.53.desc
	picture = HORDE_TRIAL_eventPicture
    
    is_triggered_only = yes

    trigger = {
        has_global_flag = enabled_faction_mechanics
    }
    
    mean_time_to_happen = {
		days = 1
	}
    
	option = {
		name = wwu_faction_system.53.option.a
		
        add_prestige = -25
	}
}

# Alliance - Random Leader if existing one is removed
country_event = {
	id = wwu_faction_system.60
	title = wwu_faction_system.60.title
	desc = wwu_faction_system.60.desc
	picture = VARIAN_WRYNN_eventPicture
    
    hidden = yes
    
    trigger = {
        has_global_flag = enabled_faction_mechanics
        has_global_flag = alliance_exists
        calc_true_if = {
            amount = 2
            all_country = {
                has_country_modifier = member_of_alliance
            }
        }
        
        has_country_modifier = member_of_alliance
        NOT = { has_country_modifier = head_of_alliance }
        all_country = {
            NOT = { has_country_modifier = head_of_alliance }
        }
    }
    
    immediate = {
        random_country = {
            limit = {
                has_country_modifier = member_of_alliance
            }
            
            set_head_of_faction = {
                faction = alliance
            }
        }
    }
	
    mean_time_to_happen = {
		days = 1
	}
    
	option = {
		name = wwu_faction_system.60.option.a
	}
}

# Hotde - Random Leader if existing one is removed
country_event = {
	id = wwu_faction_system.61
	title = wwu_faction_system.61.title
	desc = wwu_faction_system.61.desc
	picture = VARIAN_WRYNN_eventPicture
    
    hidden = yes
    
    trigger = {
        has_global_flag = enabled_faction_mechanics
        has_global_flag = horde_exists
        
        calc_true_if = {
            amount = 2
            all_country = {
                has_country_modifier = member_of_horde
            }
        }
        
        has_country_modifier = member_of_horde
        NOT = { has_country_modifier = head_of_horde }
        all_country = {
            NOT = { has_country_modifier = head_of_horde }
        }
    }
    
    immediate = {
        random_country = {
            limit = {
                has_country_modifier = member_of_horde
            }
            
            set_head_of_faction = {
                faction = horde
            }
        }
    }
	
    mean_time_to_happen = {
		days = 1
	}
    
	option = {
		name = wwu_faction_system.61.option.a
	}
}

# Old Hotde - Random Leader if existing one is removed
country_event = {
	id = wwu_faction_system.62
	title = wwu_faction_system.62.title
	desc = wwu_faction_system.62.desc
	picture = VARIAN_WRYNN_eventPicture
    
    hidden = yes
    
    trigger = {
        has_global_flag = enabled_faction_mechanics
        has_global_flag = old_horde_exists
        
        calc_true_if = {
            amount = 2
            all_country = {
                has_country_modifier = member_of_old_horde
            }
        }
        
        has_country_modifier = member_of_old_horde
        NOT = { has_country_modifier = head_of_old_horde }
        all_country = {
            NOT = { has_country_modifier = head_of_old_horde }
        }
    }
    
    immediate = {
        random_country = {
            limit = {
                has_country_modifier = member_of_old_horde
            }
            
            set_head_of_faction = {
                faction = old_horde
            }
        }
    }
	
    mean_time_to_happen = {
		days = 1
	}
    
	option = {
		name = wwu_faction_system.62.option.a
	}
}

# Trade Coalition - Random Leader if existing one is removed
country_event = {
	id = wwu_faction_system.63
	title = wwu_faction_system.63.title
	desc = wwu_faction_system.63.desc
	picture = VARIAN_WRYNN_eventPicture
    
    hidden = yes
    
    trigger = {
        has_global_flag = enabled_faction_mechanics
        has_global_flag = trade_coalition_exists
        calc_true_if = {
            amount = 2
            all_country = {
                has_country_modifier = member_of_trade_coalition
            }
        }
        
        has_country_modifier = member_of_trade_coalition
        NOT = { has_country_modifier = head_of_trade_coalition }
        all_country = {
            NOT = { has_country_modifier = head_of_trade_coalition }
        }
    }
    
    immediate = {
        random_country = {
            limit = {
                has_country_modifier = member_of_trade_coalition
            }
            
            set_head_of_faction = {
                faction = trade_coalition
            }
        }
    }
	
    mean_time_to_happen = {
		days = 1
	}
    
	option = {
		name = wwu_faction_system.62.option.a
	}
}

# Collapse of Alliance
country_event = {
	id = wwu_faction_system.70
	title = wwu_faction_system.70.title
	desc = wwu_faction_system.70.desc
	picture = VARIAN_WRYNN_eventPicture
    
    hidden = yes
    
    trigger = {
        has_global_flag = enabled_faction_mechanics
        
        # Only remove after 1 year of existence, i.e. give the AI a chance to expand the faction
        had_global_flag = {
            flag = alliance_exists
            days = 365
        }
        
        has_country_modifier = member_of_alliance
        NOT = {
            calc_true_if = {
                amount = 2
                all_country = {
                    has_country_modifier = member_of_alliance
                }
            }
        }
    }
    
    immediate = {
        destroy_faction = {
            faction = alliance
        }
    }
	
    mean_time_to_happen = {
		days = 1
	}
    
	option = {
		name = wwu_faction_system.70.option.a
	}
}

# Collapse of Horde
country_event = {
	id = wwu_faction_system.71
	title = wwu_faction_system.71.title
	desc = wwu_faction_system.71.desc
	picture = VARIAN_WRYNN_eventPicture
    
    hidden = yes
    
    trigger = {
        has_global_flag = enabled_faction_mechanics
        
        # Only remove after 1 year of existence, i.e. give the AI a chance to expand the faction
        had_global_flag = {
            flag = horde_exists
            days = 365
        }
        
        has_country_modifier = member_of_horde
        NOT = {
            calc_true_if = {
                amount = 2
                all_country = {
                    has_country_modifier = member_of_horde
                }
            }
        }
    }
    
    immediate = {
        destroy_faction = {
            faction = horde
        }
    }
	
    mean_time_to_happen = {
		days = 1
	}
    
	option = {
		name = wwu_faction_system.71.option.a
	}
}

# Collapse of Old Horde
country_event = {
	id = wwu_faction_system.72
	title = wwu_faction_system.72.title
	desc = wwu_faction_system.72.desc
	picture = VARIAN_WRYNN_eventPicture
    
    hidden = yes
    
    trigger = {
        has_global_flag = enabled_faction_mechanics
        
        # Only remove after 1 year of existence, i.e. give the AI a chance to expand the faction
        had_global_flag = {
            flag = old_horde_exists
            days = 365
        }
        
        has_country_modifier = member_of_old_horde
        NOT = {
            calc_true_if = {
                amount = 2
                all_country = {
                    has_country_modifier = member_of_old_horde
                }
            }
        }
    }
    
    immediate = {
        destroy_faction = {
            faction = old_horde
        }
    }
	
    mean_time_to_happen = {
		days = 1
	}
    
	option = {
		name = wwu_faction_system.72.option.a
	}
}

# Collapse of Trade Coalition
country_event = {
	id = wwu_faction_system.73
	title = wwu_faction_system.73.title
	desc = wwu_faction_system.73.desc
	picture = VARIAN_WRYNN_eventPicture
    
    hidden = yes
    
    trigger = {
        has_global_flag = enabled_faction_mechanics
        
        # Only remove after 1 year of existence, i.e. give the AI a chance to expand the faction
        had_global_flag = {
            flag = trade_coalition_exists
            days = 365
        }
        
        has_country_modifier = member_of_trade_coalition
        NOT = {
            calc_true_if = {
                amount = 2
                all_country = {
                    has_country_modifier = member_of_trade_coalition
                }
            }
        }
    }
    
    immediate = {
        destroy_faction = {
            faction = trade_coalition
        }
    }
	
    mean_time_to_happen = {
		days = 1
	}
    
	option = {
		name = wwu_faction_system.73.option.a
	}
}
