namespace = wwu_lc_main

# Main Spawner - Occurs every 4 years
country_event = {
	id = wwu_lc_main.1
	title = wwu_lc_main.1.title
	desc = wwu_lc_main.1.desc
	picture = BESTIARY_eventPicture
	
    hidden = yes
	is_triggered_only = yes
    
    trigger = {
        has_estate = estate_adventuring_guild
    }
	
	mean_time_to_happen = {
		days = 1
	}

    immediate = {
        random_owned_province = {
            limit = {
                is_city = yes
            }
            save_event_target_as = lc_spawn_target
        }
    }
    
	option = {
		name = wwu_lc_main.1.option.a
		goto = lc_spawn_target
        
        event_target:lc_spawn_target = {
            random_list = {
                #---------------
                # No Spawn
                #---------------
                10 = { }
                10 = { }

                #---------------
                # Bandits
                #---------------
                20 = {
                    trigger = {
                        # Is on Azeroth
                        ROOT = { is_capital_on_azeroth = yes }
                    }
                
                    # Bandits are already present
                    modifier = {
                        factor = 0
                        
                        has_any_local_concern = {
                            TYPE = bandit
                        }
                    }
                    
                    # Bandits cannot spawn in the following terrain:
                    modifier = {
                        factor = 0
                        
                        has_banned_terrain = yes
                    }

                    # Bandits prefer to spawn in the following terrain:
                    modifier = {
                        factor = 2
                        
                        OR = {
                            has_terrain = forest
                            has_terrain = hills
                        }
                    }
                    
                    # Bandits prefer to spawn in disordered provinces
                    modifier = {
                        factor = 1.25
                        devastation = 10
                    }
                    
                    modifier = {
                        factor = 1.25
                        devastation = 30
                    }
                    
                    modifier = {
                        factor = 1.25
                        devastation = 60
                    }
                    
                    # Bandits prefer to spawn in unstable countries
                    modifier = {
                        factor = 2
                        
                        owner = { 
                            NOT = { stability = 0 } 
                        }
                    }
                    province_event = { id = wwu_lc_bandits.1 }
                }
               
                #---------------
                # Orcs
                #---------------
                20 = {
                    trigger = {
                        ROOT = {
                            # Is not on Elemental Plane/Argus
                            is_capital_on_azeroth = yes
                            
                            # Is on Draenor, or Azeroth after Rise of the Horde
                            OR = {
                                AND = {
                                    current_age = age_rise_of_the_horde
                                    capital_scope = { continent = continent_draenor }
                                }
                                NOT = { current_age = age_rise_of_the_horde }
                            }
                        }
                    }
                    
                    # Orcs are already present
                    modifier = {
                        factor = 0
                        
                        has_any_local_concern = {
                            TYPE = orc
                        }
                    }
                    
                    # Orcs cannot spawn in the following terrain:
                    modifier = {
                        factor = 0
                        
                        has_banned_terrain = yes
                    }

                    # Orcs prefer to spawn in human provinces
                    modifier = {
                        factor = 3
                        
                        culture_group = culture_group_human
                    }
                    
                    # Orcs prefer to spawn in disordered provinces
                    modifier = {
                        factor = 1.25
                        devastation = 10
                    }
                    
                    modifier = {
                        factor = 1.25
                        devastation = 30
                    }
                    
                    modifier = {
                        factor = 1.25
                        devastation = 60
                    }
                    
                    # Orcs prefer to spawn in unstable countries
                    modifier = {
                        factor = 2
                        
                        owner = { 
                            NOT = { stability = 0 } 
                        }
                    }
                    
                    province_event = { id = wwu_lc_orcs.1 }
                }
                
                #---------------
                # Murloc
                #---------------
                20 = {
                    trigger = {
                        # Is on Azeroth
                        ROOT = { is_capital_on_azeroth = yes }
                    }
                    
                    # Murlocs are already present
                    modifier = {
                        factor = 0
                        
                        has_any_local_concern = {
                            TYPE = murloc
                        }
                    }
                    
                    # Murlocs cannot spawn in the following terrain:
                    modifier = {
                        factor = 0
                        
                        has_banned_terrain = yes
                    }
                    
                    # Murlocs prefer to spawn in disordered provinces
                    modifier = {
                        factor = 1.25
                        devastation = 10
                    }
                    
                    modifier = {
                        factor = 1.25
                        devastation = 30
                    }
                    
                    modifier = {
                        factor = 1.25
                        devastation = 60
                    }
                    
                    # Murlocs prefer to spawn in unstable countries
                    modifier = {
                        factor = 2
                        
                        owner = { 
                            NOT = { stability = 0 } 
                        }
                    }
                    
                    province_event = { id = wwu_lc_murlocs.1 }
                }
                
                #---------------
                # Gnolls
                #---------------
                20 = {
                    trigger = {
                        # Is on Azeroth
                        ROOT = { is_capital_on_azeroth = yes }
                    }
                    
                    # Gnolls are already present
                    modifier = {
                        factor = 0
                        
                        has_any_local_concern = {
                            TYPE = gnoll
                        }
                    }
                    
                    # Gnolls cannot spawn in the following terrain:
                    modifier = {
                        factor = 0
                        
                        has_banned_terrain = yes
                    }

                    # Gnolls prefer to spawn in the following terrain:
                    modifier = {
                        factor = 2
                        
                        OR = {
                            has_terrain = forest
                            has_terrain = woods
                            has_terrain = farmlands
                        }
                    }
                    
                    # Gnolls prefer to spawn in human provinces
                    modifier = {
                        factor = 2
                        
                        culture_group = culture_group_human
                    }
                    
                    # Gnolls prefer to spawn in disordered provinces
                    modifier = {
                        factor = 1.25
                        devastation = 10
                    }
                    
                    modifier = {
                        factor = 1.25
                        devastation = 30
                    }
                    
                    modifier = {
                        factor = 1.25
                        devastation = 60
                    }
                    
                    # Gnolls prefer to spawn in unstable countries
                    modifier = {
                        factor = 2
                        
                        owner = { 
                            NOT = { stability = 0 } 
                        }
                    }
                    
                    province_event = { id = wwu_lc_gnolls.1 }
                }
                
                #---------------
                # Worgen
                #---------------
                20 = {
                    trigger = {
                        owner = { has_global_flag = enable_worgen }
                        
                        owner = {
                            NOT = { primary_culture = culture_wolfcult }
                            NOT = { culture_group = culture_group_undead }
                        }
                        
                        # Is on Azeroth
                        ROOT = { is_capital_on_azeroth = yes }
                    }
                    
                    # Worgens are much rarer with Tolerate the Worgen
                    modifier = {
                        factor = 0.1
                        
                        owner = { has_country_flag = tolerate_the_worgen }
                    }
                    
                    # worgens are already present
                    modifier = {
                        factor = 0
                        
                        has_any_local_concern = {
                            TYPE = worgen
                        }
                    }
                    
                    # worgens cannot spawn in the following terrain:
                    modifier = {
                        factor = 0
                        
                        has_banned_terrain = yes
                    }

                    # worgens prefer to spawn in the following terrain:
                    modifier = {
                        factor = 2
                        
                        OR = {
                            has_terrain = forest
                            has_terrain = woods
                            has_terrain = farmlands
                        }
                    }
                    
                    # Worgen will affect Gilneas a lot more
                    modifier = {
                        factor = 5
                        
                        owner = { tag = A12 }
                    }
                    
                    # worgens prefer to spawn in disordered provinces
                    modifier = {
                        factor = 1.25
                        devastation = 10
                    }
                    
                    modifier = {
                        factor = 1.25
                        devastation = 30
                    }
                    
                    modifier = {
                        factor = 1.25
                        devastation = 60
                    }
                    
                    # worgens prefer to spawn in unstable countries
                    modifier = {
                        factor = 2
                        
                        owner = { 
                            NOT = { stability = 0 } 
                        }
                    }
                    
                    province_event = { id = wwu_lc_worgen.1 }
                }
            }
        }
    }
}

# Debug Event - Bandits
country_event = {
	id = wwu_lc_main.100
	title = wwu_lc_main.100.title
	desc = wwu_lc_main.100.desc
	picture = BESTIARY_eventPicture
	
    hidden = yes
	is_triggered_only = yes
    
    trigger = {
        has_estate = estate_adventuring_guild
    }
	
	mean_time_to_happen = {
		days = 1
	}

    immediate = {
        random_owned_province = {
            limit = {
                is_city = yes
            }
            save_event_target_as = lc_spawn_target
        }
    }
    
	option = {
		name = wwu_lc_main.1.option.a
		goto = lc_spawn_target
        
        event_target:lc_spawn_target = {
            province_event = { id = wwu_lc_bandits.1 }
        }
	}
}

# Debug Event - Orcs
country_event = {
	id = wwu_lc_main.101
	title = wwu_lc_main.101.title
	desc = wwu_lc_main.101.desc
	picture = BESTIARY_eventPicture
	
    hidden = yes
	is_triggered_only = yes
    
    trigger = {
        has_estate = estate_adventuring_guild
    }
	
	mean_time_to_happen = {
		days = 1
	}

    immediate = {
        random_owned_province = {
            limit = {
                is_city = yes
            }
            save_event_target_as = lc_spawn_target
        }
    }
    
	option = {
		name = wwu_lc_main.1.option.a
		goto = lc_spawn_target
        
        event_target:lc_spawn_target = {
            province_event = { id = wwu_lc_orcs.1 }
        }
	}
}

# Debug Event - Murlocs
country_event = {
	id = wwu_lc_main.102
	title = wwu_lc_main.102.title
	desc = wwu_lc_main.102.desc
	picture = BESTIARY_eventPicture
	
    hidden = yes
	is_triggered_only = yes
    
    trigger = {
        has_estate = estate_adventuring_guild
    }
	
	mean_time_to_happen = {
		days = 1
	}

    immediate = {
        random_owned_province = {
            limit = {
                is_city = yes
            }
            save_event_target_as = lc_spawn_target
        }
    }
    
	option = {
		name = wwu_lc_main.1.option.a
		goto = lc_spawn_target
        
        event_target:lc_spawn_target = {
            province_event = { id = wwu_lc_murlocs.1 }
        }
	}
}

# Debug Event - Gnolls
country_event = {
	id = wwu_lc_main.103
	title = wwu_lc_main.103.title
	desc = wwu_lc_main.103.desc
	picture = BESTIARY_eventPicture
	
    hidden = yes
	is_triggered_only = yes
    
    trigger = {
        has_estate = estate_adventuring_guild
    }
	
	mean_time_to_happen = {
		days = 1
	}

    immediate = {
        random_owned_province = {
            limit = {
                is_city = yes
            }
            save_event_target_as = lc_spawn_target
        }
    }
    
	option = {
		name = wwu_lc_main.1.option.a
		goto = lc_spawn_target
        
        event_target:lc_spawn_target = {
            province_event = { id = wwu_lc_gnolls.1 }
        }
	}
}

# Debug Event - worgens
country_event = {
	id = wwu_lc_main.104
	title = wwu_lc_main.104.title
	desc = wwu_lc_main.104.desc
	picture = BESTIARY_eventPicture
	
    hidden = yes
	is_triggered_only = yes
    
    trigger = {
        has_estate = estate_adventuring_guild
    }
	
	mean_time_to_happen = {
		days = 1
	}

    immediate = {
        random_owned_province = {
            limit = {
                is_city = yes
            }
            save_event_target_as = lc_spawn_target
        }
    }
    
	option = {
		name = wwu_lc_main.1.option.a
		goto = lc_spawn_target
        
        event_target:lc_spawn_target = {
            province_event = { id = wwu_lc_worgen.1 }
        }
	}
}