namespace = wwu_magic

# ruler_magic_training
# ruler_magic_aptitude
# ruler_magic_finesse
# ruler_magic_concentration

#-----------------------------
# Magic Training
#-----------------------------
# Magical Experiments
country_event = {
	id = wwu_magic.1
	title = wwu_magic.1.title
	desc = wwu_magic.1.desc
	picture = JAINA_eventPicture
    
	is_triggered_only = yes
    
    trigger = {
        has_ruler_modifier = magical_training
    }
	
	option = {
		name = wwu_magic.1.option.a
		
        add_adm_power = 25
	}
    option = {
		name = wwu_magic.1.option.b
		
        add_magical_training_point = yes
	}
}

# Test of Aptitude
country_event = {
	id = wwu_magic.2
	title = wwu_magic.2.title
	desc = wwu_magic.2.desc
	picture = MAGIC_TOME_eventPicture
    
	is_triggered_only = yes
    
    trigger = {
        has_ruler_modifier = magical_training
    }
	
	option = {
		name = wwu_magic.2.option.a
		
        add_magical_training_point = yes
        
        random_list = {
            75 = {
                add_aptitude_point = yes
            }
            25 = {
                remove_aptitude_point = yes
            }
        }
	}
    option = {
		name = wwu_magic.2.option.b
		
        add_magical_training_point = yes
        
        random = {
            chance = 25
            
            add_aptitude_point = yes
        }
	}
    option = {
		name = wwu_magic.2.option.c
		
        add_adm_power = 100
	}
}

# Test of Finesse
country_event = {
	id = wwu_magic.3
	title = wwu_magic.3.title
	desc = wwu_magic.3.desc
	picture = KIRIN_TOR_MAGE_eventPicture
    
	is_triggered_only = yes
    
    trigger = {
        has_ruler_modifier = magical_training
    }
	
	option = {
		name = wwu_magic.3.option.a
		
        add_magical_training_point = yes
        
        random_list = {
            75 = {
                add_finesse_point = yes
            }
            25 = {
                remove_finesse_point = yes
            }
        }
	}
    option = {
		name = wwu_magic.3.option.b
		
        add_magical_training_point = yes
        
        random = {
            chance = 25
            
            add_finesse_point = yes
        }
	}
    option = {
		name = wwu_magic.3.option.c
		
        add_mil_power = 100
	}
}

# Test of Concentration
country_event = {
	id = wwu_magic.4
	title = wwu_magic.4.title
	desc = wwu_magic.4.desc
	picture = MEDIVH_eventPicture
    
	is_triggered_only = yes
    
    trigger = {
        has_ruler_modifier = magical_training
    }
	
	option = {
		name = wwu_magic.4.option.a
		
        add_magical_training_point = yes
        
        random_list = {
            75 = {
                add_concentration_point = yes
            }
            25 = {
                remove_concentration_point = yes
            }
        }
	}
    option = {
		name = wwu_magic.4.option.b
		
        add_magical_training_point = yes
        
        random = {
            chance = 25
            
            add_concentration_point = yes
        }
	}
    option = {
		name = wwu_magic.4.option.c
		
        add_dip_power = 100
	}
}

# Involve the Light
country_event = {
	id = wwu_magic.5
	title = wwu_magic.5.title
	desc = wwu_magic.5.desc
	picture = LIGHTFORGED_UTHER_eventPicture
    
	is_triggered_only = yes
    
    trigger = {
        has_ruler_modifier = magical_training
        religion_group = light_group
    }
	
    option = {
		name = wwu_magic.5.option.a
		
        add_magical_training_point = yes
	}
}

# Twisting in the Shadows
country_event = {
	id = wwu_magic.6
	title = wwu_magic.6.title
	desc = wwu_magic.6.desc
	picture = SACRIFICIAL_PACT_eventPicture
    
	is_triggered_only = yes
    
    trigger = {
        has_ruler_modifier = magical_training
        religion_group = shadow_group
    }
	
    option = {
		name = wwu_magic.6.option.a
		
        add_magical_training_point = yes
	}
}

# Manifest the Arcane
country_event = {
	id = wwu_magic.7
	title = wwu_magic.7.title
	desc = wwu_magic.7.desc
	picture = ARCANE_MISSILES_eventPicture
    
	is_triggered_only = yes
    
    trigger = {
        has_ruler_modifier = magical_training
        religion_group = order_group
    }
	
    option = {
		name = wwu_magic.7.option.a
		
        add_magical_training_point = yes
	}
}

# Invoke Disorder
country_event = {
	id = wwu_magic.8
	title = wwu_magic.8.title
	desc = wwu_magic.8.desc
	picture = INFERNAL_eventPicture
    
	is_triggered_only = yes
    
    trigger = {
        has_ruler_modifier = magical_training
        religion_group = disorder_group
    }
	
    option = {
		name = wwu_magic.8.option.a
		
        add_magical_training_point = yes
	}
}

# Draw upon Life
country_event = {
	id = wwu_magic.9
	title = wwu_magic.9.title
	desc = wwu_magic.9.desc
	picture = HEALING_TOUCH_eventPicture
    
	is_triggered_only = yes
    
    trigger = {
        has_ruler_modifier = magical_training
        religion_group = life_group
    }
	
    option = {
		name = wwu_magic.9.option.a
		
        add_magical_training_point = yes
	}
}

# Ruminate about Death
country_event = {
	id = wwu_magic.10
	title = wwu_magic.10.title
	desc = wwu_magic.10.desc
	picture = PLAGUE_eventPicture
    
	is_triggered_only = yes
    
    trigger = {
        has_ruler_modifier = magical_training
        always = no
        religion_group = death_group
    }
	
    option = {
		name = wwu_magic.10.option.a
		
        add_magical_training_point = yes
	}
}

# Accomplished Spellcaster
country_event = {
	id = wwu_magic.11
	title = wwu_magic.11.title
	desc = wwu_magic.11.desc
	picture = FIRE_MAGE_JAINA_eventPicture
    
	is_triggered_only = yes
    
    trigger = {
        has_ruler_modifier = magical_training
        NOT = { has_ruler_modifier = spellcaster_capabilities }
        check_variable = {
            which = ruler_magic_training
            value = 5
        }
    }
	
    option = {
		name = wwu_magic.11.option.a
		
        add_ruler_modifier = {
            name = spellcaster_capabilities
            duration = -1
        }
        
        hidden_effect = {
            remove_country_modifier = magical_training
            
            add_aptitude_point = yes
            add_finesse_point = yes
            add_concentration_point = yes
            
            # Reset mana
            set_variable = {
                which = ruler_magic_mana
                value = 0
            }
        }
        
        country_event = { id = wwu_magic.16 }
	}
}

# More Training Required
country_event = {
	id = wwu_magic.12
	title = wwu_magic.12.title
	desc = wwu_magic.12.desc
	picture = MAGIC_TOME_eventPicture
    
	is_triggered_only = yes
    
    trigger = {
        NOT = { has_ruler_modifier = spellcaster_capabilities }
    }
	
    option = {
		name = wwu_magic.12.option.a
		
        add_prestige = -5
	}
}

# Degredation of Aptitude
country_event = {
	id = wwu_magic.13
	title = wwu_magic.13.title
	desc = wwu_magic.13.desc
	picture = HELLFIRE_eventPicture
    
	trigger = {
        has_ruler_modifier = spellcaster_capabilities
        check_variable = {
            which = ruler_magic_aptitude
            value = 1
        }
    }
    
    mean_time_to_happen = {
		months = 960
        
        modifier = {
            factor = 0.5
            
            NOT = { stability = 0 }
        }
        
        modifier = {
            factor = 2
            
            stability = 3
        }
    }
    
    option = {
		name = wwu_magic.13.option.a
		
        remove_aptitude_point = yes
	}
    option = {
		name = wwu_magic.13.option.b
		
        add_adm_power = -100
	}
}

# Degredation of Finesse
country_event = {
	id = wwu_magic.14
	title = wwu_magic.14.title
	desc = wwu_magic.14.desc
	picture = HELLFIRE_eventPicture
    
	trigger = {
        has_ruler_modifier = spellcaster_capabilities
        check_variable = {
            which = ruler_magic_finesse
            value = 1
        }
    }
    
    mean_time_to_happen = {
		months = 640
        
        modifier = {
            factor = 0.5
            
            NOT = { stability = 0 }
        }
        
        modifier = {
            factor = 2
            
            stability = 3
        }
    }
    
    option = {
		name = wwu_magic.14.option.a
		
        remove_finesse_point = yes
	}
    option = {
		name = wwu_magic.14.option.b
		
        add_mil_power = -100
	}
}

# Degredation of Concentration
country_event = {
	id = wwu_magic.15
	title = wwu_magic.15.title
	desc = wwu_magic.15.desc
	picture = HELLFIRE_eventPicture
    
	trigger = {
        has_ruler_modifier = spellcaster_capabilities
        check_variable = {
            which = ruler_magic_concentration
            value = 1
        }
    }
    
    mean_time_to_happen = {
		months = 640
        
        modifier = {
            factor = 0.5
            
            NOT = { stability = 0 }
        }
        
        modifier = {
            factor = 2
            
            stability = 3
        }
    }
    
    option = {
		name = wwu_magic.15.option.a
		
        remove_concentration_point = yes
	}
    option = {
		name = wwu_magic.15.option.b
		
        add_dip_power = -100
	}
}

# Magical Specialization
country_event = {
	id = wwu_magic.16
	title = wwu_magic.16.title
	desc = wwu_magic.16.desc
	picture = MAGIC_TOME_eventPicture
    
	is_triggered_only = yes
    
    immediate = {
        hidden_effect = {
            set_variable = {
                which = magic_school
                value = 0
            }
        }
    }
    
    option = {
		name = wwu_magic.16.option.arcane
		
        trigger = {
            OR = {
                any_known_country = {
                    religion_group = order_group
                    has_opinion = {
                        who = ROOT
                        value = 25
                    }
                }
                any_owned_province = {
                    religion_group = order_group
                }
            }
        }
        
        set_magic_school = {
            arcane = yes
        }
	}
    option = {
		name = wwu_magic.16.option.holy
		
        trigger = {
            OR = {
                any_known_country = {
                    religion_group = light_group
                    has_opinion = {
                        who = ROOT
                        value = 25
                    }
                }
                any_owned_province = {
                    religion_group = light_group
                }
            }
        }
        
        set_magic_school = {
            holy = yes
        }
	}
    option = {
		name = wwu_magic.16.option.chi
		
        trigger = {
            OR = {
                any_known_country = {
                    religion = celestials
                    has_opinion = {
                        who = ROOT
                        value = 25
                    }
                }
                any_owned_province = {
                    religion = celestials
                }
            }
        }
        
        set_magic_school = {
            chi = yes
        }
	}
    option = {
		name = wwu_magic.16.option.voodoo
		
        trigger = {
            OR = {
                any_known_country = {
                    OR = {
                        religion = voodoo
                        religion = hakkari
                        religion = bloodmancy
                    }
                    has_opinion = {
                        who = ROOT
                        value = 25
                    }
                }
                any_owned_province = {
                    OR = {
                        religion = voodoo
                        religion = hakkari
                        religion = bloodmancy
                    }
                }
            }
        }
        
        set_magic_school = {
            voodoo = yes
        }
	}
    option = {
		name = wwu_magic.16.option.nature
		
        trigger = {
            OR = {
                any_known_country = {
                    OR = {
                        religion = druidism
                        religion = elune
                        religion = sporemounds
                        religion = zangar
                        religion = primitive
                        religion = banana
                    }
                    has_opinion = {
                        who = ROOT
                        value = 25
                    }
                }
                any_owned_province = {
                    OR = {
                        religion = druidism
                        religion = elune
                        religion = sporemounds
                        religion = zangar
                        religion = primitive
                        religion = banana
                    }
                }
            }
        }
        
        set_magic_school = {
            nature = yes
        }
	}
    option = {
		name = wwu_magic.16.option.undead
		
        trigger = {
            OR = {
                any_known_country = {
                    religion = cult_of_the_damned
                    has_opinion = {
                        who = ROOT
                        value = 25
                    }
                }
                any_owned_province = {
                    religion = cult_of_the_damned
                }
            }
        }
        
        set_magic_school = {
            necromancy = yes
        }
	}
    option = {
		name = wwu_magic.16.option.shaman
		
        trigger = {
            OR = {
                any_known_country = {
                    OR = {
                        religion = shamanism
                        religion = tauren_shamanism
                    }
                    has_opinion = {
                        who = ROOT
                        value = 25
                    }
                }
                any_owned_province = {
                    OR = {
                        religion = shamanism
                        religion = tauren_shamanism
                    }
                }
            }
        }
        
        set_magic_school = {
            shaman = yes
        }
	}
    option = {
		name = wwu_magic.16.option.fel
		
        trigger = {
            OR = {
                any_known_country = {
                    religion = fel
                    has_opinion = {
                        who = ROOT
                        value = 25
                    }
                }
                any_owned_province = {
                    religion = fel
                }
            }
        }
        
        set_magic_school = {
            fel = yes
        }
	}
    option = {
		name = wwu_magic.16.option.dragon
		
        trigger = {
            OR = {
                culture_group = culture_group_dragonkin
                religion = primalist
            }
        }
        
        set_magic_school = {
            dragon = yes
        }
	}
    option = {
		name = wwu_magic.16.option.old_god
		
        trigger = {
            OR = {
                religion = cthun
                religion = nzoth
                religion = yogg_saron
                religion = yshaarj
                religion = sha
            }
        }
        
        set_magic_school = {
            corruption = yes
        }
	}
    option = {
		name = wwu_magic.16.option.shadow
		
        trigger = {
            OR = {
                any_known_country = {
                    OR = {
                        religion = shadow
                        religion = forgotten_shadow
                        religion = twilight_cult
                        religion = void
                        religion = anima
                    }
                    has_opinion = {
                        who = ROOT
                        value = 25
                    }
                }
                any_owned_province = {
                    OR = {
                        religion = shadow
                        religion = forgotten_shadow
                        religion = twilight_cult
                        religion = void
                        religion = anima
                    }
                }
            }
        }
        
        set_magic_school = {
            shadow = yes
        }
	}
    option = {
		name = wwu_magic.16.option.titan
		
        trigger = {
            OR = {
                culture_group = culture_group_titan
                culture_group = culture_group_earthen
            }
        }
        
        set_magic_school = {
            titan = yes
        }
	}
    option = {
		name = wwu_magic.16.option.runic
		
        trigger = {
            culture_group = culture_group_vrykul
        }
        
        set_magic_school = {
            runic = yes
        }
	}
    option = {
		name = wwu_magic.16.option.nightmare
		
        trigger = {
            religion = nightmare
        }
        
        set_magic_school = {
            nightmare = yes
        }
	}
    option = {
		name = wwu_magic.16.option.earth
		
        trigger = {
            religion = earth
        }
        
        set_magic_school = {
            elemental_earth = yes
        }
	}
    option = {
		name = wwu_magic.16.option.fire
		
        trigger = {
            OR = {
                religion = fire
                religion = ordos
            }
        }
        
        set_magic_school = {
            elemental_fire = yes
        }
	}
    option = {
		name = wwu_magic.16.option.water
		
        trigger = {
            OR = {
                religion = water
                religion = arkkorok
                religion = deep_mother
            }
        }
        
        set_magic_school = {
            elemental_water = yes
        }
	}
    option = {
		name = wwu_magic.16.option.wind
		
        trigger = {
            religion = wind
        }
        
        set_magic_school = {
            elemental_air = yes
        }
	}
    option = {
		name = wwu_magic.16.option.none
		
        custom_tooltip = ALLOW_SPECIALIZATION_DECISION
        hidden_effect = {
            set_country_flag = allow_magic_specialization_decision
        }
	}
}

# Improvement in Aptitude 
country_event = {
	id = wwu_magic.40
	title = wwu_magic.40.title
	desc = wwu_magic.40.desc
	picture = ANCIENT_TEACHINGS_eventPicture
    
	is_triggered_only = yes
	
	option = {
		name = wwu_magic.40.option.a
		
        add_aptitude_point = yes
	}
}

# Improvement in Finesse 
country_event = {
	id = wwu_magic.41
	title = wwu_magic.41.title
	desc = wwu_magic.41.desc
	picture = ANCIENT_TEACHINGS_eventPicture
    
	is_triggered_only = yes
	
	option = {
		name = wwu_magic.41.option.a
		
        add_finesse_point = yes
	}
}

# Improvement in Concentration 
country_event = {
	id = wwu_magic.42
	title = wwu_magic.42.title
	desc = wwu_magic.42.desc
	picture = ANCIENT_TEACHINGS_eventPicture
    
	is_triggered_only = yes
	
	option = {
		name = wwu_magic.42.option.a
		
        add_concentration_point = yes
	}
}

# Diminishment in Aptitude 
country_event = {
	id = wwu_magic.50
	title = wwu_magic.50.title
	desc = wwu_magic.50.desc
	picture = ANGRY_CHICKEN_eventPicture
    
	is_triggered_only = yes
	
	option = {
		name = wwu_magic.50.option.a
		
        remove_aptitude_point = yes
	}
}

# Diminishment in Finesse 
country_event = {
	id = wwu_magic.51
	title = wwu_magic.51.title
	desc = wwu_magic.51.desc
	picture = ANGRY_CHICKEN_eventPicture
    
	is_triggered_only = yes
	
	option = {
		name = wwu_magic.51.option.a
		
        remove_finesse_point = yes
	}
}

# Diminishment in Concentration 
country_event = {
	id = wwu_magic.52
	title = wwu_magic.52.title
	desc = wwu_magic.52.desc
	picture = ANGRY_CHICKEN_eventPicture
    
	is_triggered_only = yes
	
	option = {
		name = wwu_magic.52.option.a
		
        remove_concentration_point = yes
	}
}

# Magical Improvements
country_event = {
	id = wwu_magic.60
	title = wwu_magic.60.title
	desc = wwu_magic.60.desc
	picture = MAGIC_TOME_eventPicture
    
	is_triggered_only = yes
    
    trigger = {
        has_ruler_modifier = spellcaster_capabilities
    }
	
	option = {
		name = wwu_magic.60.improve_aptitude.valid
        
        trigger = {
            # -> Max
            if = {
                limit = {
                    check_variable = {
                        which = ruler_magic_aptitude
                        value = 5
                    }
                }
                always = no
            }
            # -> Legendary
            else_if = {
                limit = {
                    check_variable = {
                        which = ruler_magic_aptitude
                        value = 4
                    }
                }
                adm_power = 500
            }
            # -> Epic
            else_if = {
                limit = {
                    NOT = {
                        check_variable = {
                            which = ruler_magic_aptitude
                            value = 4
                        }
                    }
                    check_variable = {
                        which = ruler_magic_aptitude
                        value = 3
                    }
                }
                adm_power = 400
            }
            # -> Rare
            else_if = {
                limit = {
                    NOT = {
                        check_variable = {
                            which = ruler_magic_aptitude
                            value = 3
                        }
                    }
                    check_variable = {
                        which = ruler_magic_aptitude
                        value = 2
                    }
                }
                adm_power = 300
            }
            # -> Common
            else_if = {
                limit = {
                    NOT = {
                        check_variable = {
                            which = ruler_magic_aptitude
                            value = 2
                        }
                    }
                    check_variable = {
                        which = ruler_magic_aptitude
                        value = 1
                    }
                }
                adm_power = 200
            }
            # -> Poor
            else = {
                adm_power = 100
            }
        }
		
        # -> Legendary
        if = {
            limit = {
                check_variable = {
                    which = ruler_magic_aptitude
                    value = 4
                }
            }
            add_adm_power = -500
        }
        # -> Epic
        else_if = {
            limit = {
                NOT = {
                    check_variable = {
                        which = ruler_magic_aptitude
                        value = 4
                    }
                }
                check_variable = {
                    which = ruler_magic_aptitude
                    value = 3
                }
            }
            add_adm_power = -400
        }
        # -> Rare
        else_if = {
            limit = {
                NOT = {
                    check_variable = {
                        which = ruler_magic_aptitude
                        value = 3
                    }
                }
                check_variable = {
                    which = ruler_magic_aptitude
                    value = 2
                }
            }
            add_adm_power = -300
        }
        # -> Common
        else_if = {
            limit = {
                NOT = {
                    check_variable = {
                        which = ruler_magic_aptitude
                        value = 2
                    }
                }
                check_variable = {
                    which = ruler_magic_aptitude
                    value = 1
                }
            }
            add_adm_power = -200
        }
        # -> Poor
        else = {
            add_adm_power = -100
        }
        
        add_ruler_modifier = {
            name = recently_trained_magic
            duration = 1800
        }
        
        country_event = { id = wwu_magic.40 }
	}
    option = {
		name = wwu_magic.60.improve_aptitude.invalid
		
        trigger = {
            # -> Max
            if = {
                limit = {
                    check_variable = {
                        which = ruler_magic_aptitude
                        value = 5
                    }
                }
                always = no
            }
            # -> Legendary
            else_if = {
                limit = {
                    check_variable = {
                        which = ruler_magic_aptitude
                        value = 4
                    }
                }
                NOT = { adm_power = 500 }
            }
            # -> Epic
            else_if = {
                limit = {
                    NOT = {
                        check_variable = {
                            which = ruler_magic_aptitude
                            value = 4
                        }
                    }
                    check_variable = {
                        which = ruler_magic_aptitude
                        value = 3
                    }
                }
                NOT = { adm_power = 400 }
            }
            # -> Rare
            else_if = {
                limit = {
                    NOT = {
                        check_variable = {
                            which = ruler_magic_aptitude
                            value = 3
                        }
                    }
                    check_variable = {
                        which = ruler_magic_aptitude
                        value = 2
                    }
                }
                NOT = { adm_power = 300 }
            }
            # -> Common
            else_if = {
                limit = {
                    NOT = {
                        check_variable = {
                            which = ruler_magic_aptitude
                            value = 2
                        }
                    }
                    check_variable = {
                        which = ruler_magic_aptitude
                        value = 1
                    }
                }
                NOT = { adm_power = 200 }
            }
            # -> Poor
            else = {
                NOT = { adm_power = 100 }
            }
        }
		
        # -> Max
        if = {
            limit = {
                check_variable = {
                    which = ruler_magic_aptitude
                    value = 5
                }
            }
            custom_tooltip = MAX_APTITUDE_TT
        }
        # -> Legendary
        else_if = {
            limit = {
                check_variable = {
                    which = ruler_magic_aptitude
                    value = 4
                }
            }
            custom_tooltip = NEED_ADM_POWER_500_TT
        }
        # -> Epic
        else_if = {
            limit = {
                NOT = {
                    check_variable = {
                        which = ruler_magic_aptitude
                        value = 4
                    }
                }
                check_variable = {
                    which = ruler_magic_aptitude
                    value = 3
                }
            }
            custom_tooltip = NEED_ADM_POWER_400_TT
        }
        # -> Rare
        else_if = {
            limit = {
                NOT = {
                    check_variable = {
                        which = ruler_magic_aptitude
                        value = 3
                    }
                }
                check_variable = {
                    which = ruler_magic_aptitude
                    value = 2
                }
            }
            custom_tooltip = NEED_ADM_POWER_300_TT
        }
        # -> Common
        else_if = {
            limit = {
                NOT = {
                    check_variable = {
                        which = ruler_magic_aptitude
                        value = 2
                    }
                }
                check_variable = {
                    which = ruler_magic_aptitude
                    value = 1
                }
            }
            custom_tooltip = NEED_ADM_POWER_200_TT
        }
        # -> Poor
        else = {
            custom_tooltip = NEED_ADM_POWER_100_TT
        }
	}
    
    option = {
		name = wwu_magic.60.improve_finesse.valid
        
        trigger = {
            # -> Max
            if = {
                limit = {
                    check_variable = {
                        which = ruler_magic_finesse
                        value = 5
                    }
                }
                always = no
            }
            # -> Legendary
            else_if = {
                limit = {
                    check_variable = {
                        which = ruler_magic_finesse
                        value = 4
                    }
                }
                mil_power = 500
            }
            # -> Epic
            else_if = {
                limit = {
                    NOT = {
                        check_variable = {
                            which = ruler_magic_finesse
                            value = 4
                        }
                    }
                    check_variable = {
                        which = ruler_magic_finesse
                        value = 3
                    }
                }
                mil_power = 400
            }
            # -> Rare
            else_if = {
                limit = {
                    NOT = {
                        check_variable = {
                            which = ruler_magic_finesse
                            value = 3
                        }
                    }
                    check_variable = {
                        which = ruler_magic_finesse
                        value = 2
                    }
                }
                mil_power = 300
            }
            # -> Common
            else_if = {
                limit = {
                    NOT = {
                        check_variable = {
                            which = ruler_magic_finesse
                            value = 2
                        }
                    }
                    check_variable = {
                        which = ruler_magic_finesse
                        value = 1
                    }
                }
                mil_power = 200
            }
            # -> Poor
            else = {
                mil_power = 100
            }
        }
		
        # -> Legendary
        if = {
            limit = {
                check_variable = {
                    which = ruler_magic_finesse
                    value = 4
                }
            }
            add_mil_power = -500
        }
        # -> Epic
        else_if = {
            limit = {
                NOT = {
                    check_variable = {
                        which = ruler_magic_finesse
                        value = 4
                    }
                }
                check_variable = {
                    which = ruler_magic_finesse
                    value = 3
                }
            }
            add_mil_power = -400
        }
        # -> Rare
        else_if = {
            limit = {
                NOT = {
                    check_variable = {
                        which = ruler_magic_finesse
                        value = 3
                    }
                }
                check_variable = {
                    which = ruler_magic_finesse
                    value = 2
                }
            }
            add_mil_power = -300
        }
        # -> Common
        else_if = {
            limit = {
                NOT = {
                    check_variable = {
                        which = ruler_magic_finesse
                        value = 2
                    }
                }
                check_variable = {
                    which = ruler_magic_finesse
                    value = 1
                }
            }
            add_mil_power = -200
        }
        # -> Poor
        else = {
            add_mil_power = -100
        }
        
        add_ruler_modifier = {
            name = recently_trained_magic
            duration = 1800
        }
        
        country_event = { id = wwu_magic.41 }
	}
    option = {
		name = wwu_magic.60.improve_finesse.invalid
		
        trigger = {
            # -> Max
            if = {
                limit = {
                    check_variable = {
                        which = ruler_magic_finesse
                        value = 5
                    }
                }
                always = no
            }
            # -> Legendary
            else_if = {
                limit = {
                    check_variable = {
                        which = ruler_magic_finesse
                        value = 4
                    }
                }
                NOT = { mil_power = 500 }
            }
            # -> Epic
            else_if = {
                limit = {
                    NOT = {
                        check_variable = {
                            which = ruler_magic_finesse
                            value = 4
                        }
                    }
                    check_variable = {
                        which = ruler_magic_finesse
                        value = 3
                    }
                }
                NOT = { mil_power = 400 }
            }
            # -> Rare
            else_if = {
                limit = {
                    NOT = {
                        check_variable = {
                            which = ruler_magic_finesse
                            value = 3
                        }
                    }
                    check_variable = {
                        which = ruler_magic_finesse
                        value = 2
                    }
                }
                NOT = { mil_power = 300 }
            }
            # -> Common
            else_if = {
                limit = {
                    NOT = {
                        check_variable = {
                            which = ruler_magic_finesse
                            value = 2
                        }
                    }
                    check_variable = {
                        which = ruler_magic_finesse
                        value = 1
                    }
                }
                NOT = { mil_power = 200 }
            }
            # -> Poor
            else = {
                NOT = { mil_power = 100 }
            }
        }
		
        # -> Max
        if = {
            limit = {
                check_variable = {
                    which = ruler_magic_finesse
                    value = 5
                }
            }
            custom_tooltip = MAX_FINESSE_TT
        }
        # -> Legendary
        else_if = {
            limit = {
                check_variable = {
                    which = ruler_magic_finesse
                    value = 4
                }
            }
            custom_tooltip = NEED_MIL_POWER_500_TT
        }
        # -> Epic
        else_if = {
            limit = {
                NOT = {
                    check_variable = {
                        which = ruler_magic_finesse
                        value = 4
                    }
                }
                check_variable = {
                    which = ruler_magic_finesse
                    value = 3
                }
            }
            custom_tooltip = NEED_MIL_POWER_400_TT
        }
        # -> Rare
        else_if = {
            limit = {
                NOT = {
                    check_variable = {
                        which = ruler_magic_finesse
                        value = 3
                    }
                }
                check_variable = {
                    which = ruler_magic_finesse
                    value = 2
                }
            }
            custom_tooltip = NEED_MIL_POWER_300_TT
        }
        # -> Common
        else_if = {
            limit = {
                NOT = {
                    check_variable = {
                        which = ruler_magic_finesse
                        value = 2
                    }
                }
                check_variable = {
                    which = ruler_magic_finesse
                    value = 1
                }
            }
            custom_tooltip = NEED_MIL_POWER_200_TT
        }
        # -> Poor
        else = {
            custom_tooltip = NEED_MIL_POWER_100_TT
        }
	}
    
    option = {
		name = wwu_magic.60.improve_concentration.valid
        
        trigger = {
            # -> Max
            if = {
                limit = {
                    check_variable = {
                        which = ruler_magic_concentration
                        value = 5
                    }
                }
                always = no
            }
            # -> Legendary
            else_if = {
                limit = {
                    check_variable = {
                        which = ruler_magic_concentration
                        value = 4
                    }
                }
                dip_power = 500
            }
            # -> Epic
            else_if = {
                limit = {
                    NOT = {
                        check_variable = {
                            which = ruler_magic_concentration
                            value = 4
                        }
                    }
                    check_variable = {
                        which = ruler_magic_concentration
                        value = 3
                    }
                }
                dip_power = 400
            }
            # -> Rare
            else_if = {
                limit = {
                    NOT = {
                        check_variable = {
                            which = ruler_magic_concentration
                            value = 3
                        }
                    }
                    check_variable = {
                        which = ruler_magic_concentration
                        value = 2
                    }
                }
                dip_power = 300
            }
            # -> Common
            else_if = {
                limit = {
                    NOT = {
                        check_variable = {
                            which = ruler_magic_concentration
                            value = 2
                        }
                    }
                    check_variable = {
                        which = ruler_magic_concentration
                        value = 1
                    }
                }
                dip_power = 200
            }
            # -> Poor
            else = {
                dip_power = 100
            }
        }
		
        # -> Legendary
        if = {
            limit = {
                check_variable = {
                    which = ruler_magic_concentration
                    value = 4
                }
            }
            add_dip_power = -500
        }
        # -> Epic
        else_if = {
            limit = {
                NOT = {
                    check_variable = {
                        which = ruler_magic_concentration
                        value = 4
                    }
                }
                check_variable = {
                    which = ruler_magic_concentration
                    value = 3
                }
            }
            add_dip_power = -400
        }
        # -> Rare
        else_if = {
            limit = {
                NOT = {
                    check_variable = {
                        which = ruler_magic_concentration
                        value = 3
                    }
                }
                check_variable = {
                    which = ruler_magic_concentration
                    value = 2
                }
            }
            add_dip_power = -300
        }
        # -> Common
        else_if = {
            limit = {
                NOT = {
                    check_variable = {
                        which = ruler_magic_concentration
                        value = 2
                    }
                }
                check_variable = {
                    which = ruler_magic_concentration
                    value = 1
                }
            }
            add_dip_power = -200
        }
        # -> Poor
        else = {
            add_dip_power = -100
        }
        
        add_ruler_modifier = {
            name = recently_trained_magic
            duration = 1800
        }
        
        country_event = { id = wwu_magic.42 }
	}
    option = {
		name = wwu_magic.60.improve_concentration.invalid
		
        trigger = {
            # -> Max
            if = {
                limit = {
                    check_variable = {
                        which = ruler_magic_concentration
                        value = 5
                    }
                }
                always = no
            }
            # -> Legendary
            else_if = {
                limit = {
                    check_variable = {
                        which = ruler_magic_concentration
                        value = 4
                    }
                }
                NOT = { dip_power = 500 }
            }
            # -> Epic
            else_if = {
                limit = {
                    NOT = {
                        check_variable = {
                            which = ruler_magic_concentration
                            value = 4
                        }
                    }
                    check_variable = {
                        which = ruler_magic_concentration
                        value = 3
                    }
                }
                NOT = { dip_power = 400 }
            }
            # -> Rare
            else_if = {
                limit = {
                    NOT = {
                        check_variable = {
                            which = ruler_magic_concentration
                            value = 3
                        }
                    }
                    check_variable = {
                        which = ruler_magic_concentration
                        value = 2
                    }
                }
                NOT = { dip_power = 300 }
            }
            # -> Common
            else_if = {
                limit = {
                    NOT = {
                        check_variable = {
                            which = ruler_magic_concentration
                            value = 2
                        }
                    }
                    check_variable = {
                        which = ruler_magic_concentration
                        value = 1
                    }
                }
                NOT = { dip_power = 200 }
            }
            # -> Poor
            else = {
                NOT = { dip_power = 100 }
            }
        }
		
        # -> Max
        if = {
            limit = {
                check_variable = {
                    which = ruler_magic_concentration
                    value = 5
                }
            }
            custom_tooltip = MAX_CONCENTRATION_TT
        }
        # -> Legendary
        else_if = {
            limit = {
                check_variable = {
                    which = ruler_magic_concentration
                    value = 4
                }
            }
            custom_tooltip = NEED_DIP_POWER_500_TT
        }
        # -> Epic
        else_if = {
            limit = {
                NOT = {
                    check_variable = {
                        which = ruler_magic_concentration
                        value = 4
                    }
                }
                check_variable = {
                    which = ruler_magic_concentration
                    value = 3
                }
            }
            custom_tooltip = NEED_DIP_POWER_400_TT
        }
        # -> Rare
        else_if = {
            limit = {
                NOT = {
                    check_variable = {
                        which = ruler_magic_concentration
                        value = 3
                    }
                }
                check_variable = {
                    which = ruler_magic_concentration
                    value = 2
                }
            }
            custom_tooltip = NEED_DIP_POWER_300_TT
        }
        # -> Common
        else_if = {
            limit = {
                NOT = {
                    check_variable = {
                        which = ruler_magic_concentration
                        value = 2
                    }
                }
                check_variable = {
                    which = ruler_magic_concentration
                    value = 1
                }
            }
            custom_tooltip = NEED_DIP_POWER_200_TT
        }
        # -> Poor
        else = {
            custom_tooltip = NEED_DIP_POWER_100_TT
        }
	}
    
    option = {
		name = wwu_magic.60.exit
		
        hidden_effect = {
            country_event = { id = wwu_ruler_view.1 }
        }
    }
}