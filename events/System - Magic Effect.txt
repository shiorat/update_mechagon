namespace = wwu_magic_effect

# Ascended Commander Dies
country_event = {
	id = wwu_magic_effect.1
	title = wwu_magic_effect.1.title
	desc = wwu_magic_effect.1.desc
	picture = FORKED_LIGHTNING_eventPicture
    
	is_triggered_only = yes
	
	option = {
		name = wwu_magic_effect.1.option.a
		
        kill_leader = {
            type = "Ascended Commander"
        }
	}
}

# Avatar of the Light Dies
country_event = {
	id = wwu_magic_effect.2
	title = wwu_magic_effect.2.title
	desc = wwu_magic_effect.2.desc
	picture = FORKED_LIGHTNING_eventPicture
    
	is_triggered_only = yes
	
	option = {
		name = wwu_magic_effect.2.option.a
		
        kill_leader = {
            type = "Avatar of the Light"
        }
	}
}

# Polymorph Begins
country_event = {
	id = wwu_magic_effect.10
	title = wwu_magic_effect.10.title
	desc = wwu_magic_effect.10.desc
	picture = POLYMORPH_BOAR_eventPicture
    
	is_triggered_only = yes

    mean_time_to_happen = {
		days = 1
    }
	
	option = {
		name = wwu_magic_effect.10.option.a
		
        custom_tooltip = POLYMORPH_BEGINS_TT
	}
}


# Polymorph in X
country_event = {
	id = wwu_magic_effect.11
	title = wwu_magic_effect.11.title
	desc = wwu_magic_effect.11.desc
	picture = POLYMORPH_BOAR_eventPicture
    
	trigger = {
        has_country_flag = polymorph_active
        check_variable = {
            which = polymorph_count
            value = 1
        }
        any_owned_province = {
            NOT = { culture = ROOT }
            NOT = { has_province_modifier = polymorph_modifier }
        }
    }
    
    immediate = {
        hidden_effect = {
            random_owned_province = {
                limit = {
                    NOT = { culture = ROOT }
                }
                save_event_target_as = target_province
            }
            subtract_variable = {
                which = polymorph_count
                value = 1
            }
        }
    }
    
    mean_time_to_happen = {
		days = 1
    }
	
	option = {
		name = wwu_magic_effect.11.option.a
		
        event_target:target_province = {
            add_province_modifier = {
                name = polymorph_modifier
                duration = 3650
            }
        }
	}
}

# Polymorph Ends
country_event = {
	id = wwu_magic_effect.12
	title = wwu_magic_effect.12.title
	desc = wwu_magic_effect.12.desc
	picture = POLYMORPH_BOAR_eventPicture
    
    hidden = yes
    
	trigger = {
        has_country_flag = polymorph_active
        OR = {
            NOT = {
                check_variable = {
                    which = polymorph_count
                    value = 1
                }
            }
            NOT = {
                any_owned_province = {
                    NOT = { culture = ROOT }
                }
            }
        }
    }
    
    mean_time_to_happen = {
		days = 1
    }
    
	option = {
		name = wwu_magic_effect.12.option.a
		
        clr_country_flag = polymorph_active
	}
}

# Mirror Image Begins
country_event = {
	id = wwu_magic_effect.20
	title = wwu_magic_effect.20.title
	desc = wwu_magic_effect.20.desc
	picture = MIRROR_IMAGE_eventPicture
    
	is_triggered_only = yes

    mean_time_to_happen = {
		days = 1
    }
	
	option = {
		name = wwu_magic_effect.20.option.a
		
        custom_tooltip = MIRROR_IMAGE_BEGINS_TT
	}
}

# Mirror Image in X
country_event = {
	id = wwu_magic_effect.21
	title = wwu_magic_effect.21.title
	desc = wwu_magic_effect.21.desc
	picture = MIRROR_IMAGE_eventPicture
    
	trigger = {
        has_country_flag = mirror_image_active
        check_variable = {
            which = mirror_image_count
            value = 1
        }
        any_owned_province = {
            NOT = { religion = ROOT }
            NOT = { has_province_modifier = mirror_image_modifier }
        }
    }
    
    immediate = {
        hidden_effect = {
            random_owned_province = {
                limit = {
                    NOT = { religion = ROOT }
                }
                save_event_target_as = target_province
            }
            subtract_variable = {
                which = mirror_image_count
                value = 1
            }
        }
    }
    
    mean_time_to_happen = {
		days = 1
    }
	
	option = {
		name = wwu_magic_effect.21.option.a
		
        event_target:target_province = {
            add_province_modifier = {
                name = mirror_image_modifier
                duration = 3650
            }
        }
	}
}

# Mirror Image Ends
country_event = {
	id = wwu_magic_effect.22
	title = wwu_magic_effect.22.title
	desc = wwu_magic_effect.22.desc
	picture = MIRROR_IMAGE_eventPicture
    
    hidden = yes
    
	trigger = {
        has_country_flag = mirror_image_active
        OR = {
            NOT = {
                check_variable = {
                    which = mirror_image_count
                    value = 1
                }
            }
            NOT = {
                any_owned_province = {
                    NOT = { religion = ROOT }
                }
            }
        }
    }
    
    mean_time_to_happen = {
		days = 1
    }
    
	option = {
		name = wwu_magic_effect.22.option.a
		
        clr_country_flag = mirror_image_active
	}
}

